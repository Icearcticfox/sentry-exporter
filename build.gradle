apply plugin: 'com.criteo.python-module'

python {
    packageName='sentry-exporter'
    publishWheel = false
    usePython('3.11')
    pipVersion="pip>=23.2.1"
}

venv {
    lint {
        requirementFiles file('requirements.txt')
        requirementFiles file('tests-requirements.txt')
        commandTask('pythonBlack') {
            execution {
                command '-m black --check --diff .'
            }
        }
    }
}

tasks.named('check')  {
    dependsOn 'pythonBlack'
}

pex {
    main {
        consoleScriptsEntryPoint = 'sentry-exporter'
        publish = true
    }
}
